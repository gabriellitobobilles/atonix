<mat-card class="white-card">
  <mat-card-title>Change Password</mat-card-title>
  <mat-card-content>
    <form id="login-form" [formGroup]="form" (ngSubmit)="submit()">
      <p>
        <mat-form-field>
          <mat-placeholder class="placeholder">Username</mat-placeholder>
          <input type="text" matInput formControlName="email" />
          <fa-icon matSuffix [icon]="faEnvelope"></fa-icon>
        </mat-form-field>
      </p>
      <div
        *ngIf="form.controls['email'].invalid && (form.controls['email'].dirty || form.controls['email'].touched)"
        class="alert alert-danger"
      >
        <div *ngIf="form.controls['email'].errors.required">Username is required.</div>
        <div *ngIf="form.controls['email'].errors.email">Username is invalid.</div>
      </div>
      <p>
        <mat-form-field>
          <mat-placeholder class="placeholder">Code</mat-placeholder>
          <input type="text" matInput formControlName="code" />
          <fa-icon matSuffix [icon]="faCode"></fa-icon>
        </mat-form-field>
      </p>
      <div
        *ngIf="form.controls['code'].invalid && (form.controls['code'].dirty || form.controls['code'].touched)"
        class="alert alert-danger"
      >
        <div *ngIf="form.controls['code'].errors.required">Code is required.</div>
        <div *ngIf="form.controls['code'].errors.minlength">Code must be 6 numbers.</div>
        <div *ngIf="form.controls['code'].errors.maxlength">Code must be 6 numbers.</div>
      </div>
      <p>
        <mat-form-field>
          <mat-placeholder class="placeholder">Password</mat-placeholder>
          <input type="password" matInput formControlName="password1" />
          <fa-icon matSuffix [icon]="faLock"></fa-icon>
        </mat-form-field>
      </p>
      <div
        *ngIf="form.controls['password1'].invalid && (form.controls['password1'].dirty || form.controls['password1'].touched)"
        class="alert alert-danger"
      >
        <div *ngIf="form.controls['password1'].errors.required">New password is required.</div>
        <div *ngIf="form.controls['password1'].errors.minlength">Password must be at least 8 characters.</div>
      </div>
      <p>
        <mat-form-field>
          <mat-placeholder class="placeholder">Retype Password</mat-placeholder>
          <input type="password" matInput formControlName="password2" />
          <fa-icon matSuffix [icon]="faLock"></fa-icon>
        </mat-form-field>
      </p>
      <div *ngIf="form.invalid && (form.dirty || form.touched)" class="alert alert-danger">
        <div *ngIf="form.errors['mismatch']">Passwords do not match.</div>
      </div>
      <p><mat-checkbox labelPosition="before" formControlName="rememberMe"> Remember Me </mat-checkbox></p>

      <p *ngIf="errorMessage" class="loginError">{{ errorMessage }}</p>

      <p class="loginButtons">
        <button class="mat-elevation-z1" type="button" (click)="cancel()" mat-button>Cancel</button>
        <button class="mat-elevation-z1" type="submit" mat-button>Change Password</button>
      </p>
    </form>
  </mat-card-content>
</mat-card>
